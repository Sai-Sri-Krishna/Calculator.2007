<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: Arial;
            background-color: rgb(239, 255, 160);
        }
        .calculation {
            color: rgb(0, 0, 0);
            font-size: 45px;
            margin-top: 15px;
            margin-bottom: 5px;
            min-height: 50px; /* Ensure space for display even when empty */
        }
        .calculator-button {
            height: 60px;
            width: 60px;
            border-radius: 60px;
            border: none;
            font-size: 26px;
            cursor: pointer;
            margin-right: 5px;
        }
        .gray-button {
            background-color: rgb(51, 51, 51);
            color: white;
        }
        .orange-button {
            background-color: rgb(254, 160, 10);
            color: white;
        }
        .clear-button {
            font-size: 17px;
        }
        .kk {
  border: 3px solid #333;
  border-radius: 15px;
  padding: 20px;
  width: fit-content;
  margin: 50px auto;
  background-color: #f9f9f9;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
.cal{
    text-align: center;
    font-weight: bold;
}
.cal {
  font-style: italic;
  font-weight: bold;
  text-align: center;
  margin-top: 0px;
  margin-bottom: 0px;
}


    </style>
</head>
<body> 
    
    <div class="kk">    
        <h3 class="cal"> Mini Calculator</h3>
    <p class="js-calculation calculation"></p>
    <p>
        <button class="calculator-button gray-button" onclick="updateCalculation('1');">1</button>
        <button class="calculator-button gray-button" onclick="updateCalculation('2');">2</button>
        <button class="calculator-button gray-button" onclick="updateCalculation('3');">3</button>
        <button class="calculator-button orange-button" onclick="updateCalculation(' + ');">+</button>
    </p>
    <p>
        <button class="calculator-button gray-button" onclick="updateCalculation('4');">4</button>
        <button class="calculator-button gray-button" onclick="updateCalculation('5');">5</button>
        <button class="calculator-button gray-button" onclick="updateCalculation('6');">6</button>
        <button class="calculator-button orange-button" onclick="updateCalculation(' - ');">-</button>
    </p>
    <p>
        <button class="calculator-button gray-button" onclick="updateCalculation('7');">7</button>
        <button class="calculator-button gray-button" onclick="updateCalculation('8');">8</button>
        <button class="calculator-button gray-button" onclick="updateCalculation('9');">9</button>
        <button class="calculator-button orange-button" onclick="updateCalculation(' * ');">*</button>
    </p>
    <p>
        <button class="calculator-button gray-button" onclick="updateCalculation('0');">0</button>
        <button class="calculator-button gray-button" onclick="updateCalculation('.');">.</button>
        <button class="calculator-button gray-button" onclick="calculate();">=</button>
        <button class="calculator-button orange-button" onclick="updateCalculation(' / ');">/</button>
    </p>
    <p>
        <button class="calculator-button gray-button clear-button" onclick="clearCalculation();">Clear</button>
    </p>
    </div>

    <script>
        let calculation = localStorage.getItem('calculation') || '';

        // Display the calculation when the page first loads.
        displayCalculation();

        function updateCalculation(value) {
            // Check if the current display is an error, if so, reset it
            if (calculation === 'Error') {
                calculation = '';
            }
            calculation += value;
            displayCalculation();
            localStorage.setItem('calculation', calculation);
        }

        function calculate() {
            if (calculation === '') {
                return;
            }
            try {
                // Use a regular expression to validate the input string
                // This ensures it only contains numbers, operators, and decimal points
                const validExpression = /^[0-9+\-*/.\s]+$/;
                if (!validExpression.test(calculation)) {
                    calculation = 'Error';
                } else {
                    // This is a safe way to perform the calculation
                    // by restricting what can be evaluated
                    const result = Function(`'use strict'; return (${calculation})`)();
                    calculation = result;
                }
            } catch (error) {
                calculation = 'Error';
            }
            displayCalculation();
            localStorage.setItem('calculation', calculation);
        }

        function clearCalculation() {
            calculation = '';
            displayCalculation();
            localStorage.setItem('calculation', calculation);
        }

        function displayCalculation() {
            document.querySelector('.js-calculation').innerHTML = calculation;
        }
    </script>
</body>
</html>